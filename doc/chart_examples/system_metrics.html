<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üñ•Ô∏è System Metrics - Real-time Monitoring Dashboard</title>

    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>

    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        :root {
            --bg-color: #1a1a1a;
            --text-color: #ffffff;
            --border-color: #444444;
            --panel-bg: #2d2d2d;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .control-panel {
            background-color: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .chart-container {
            background-color: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            position: relative;
        }

        .stats-panel {
            background-color: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }

        .field-selector {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 10px;
        }

        .export-buttons {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1000;
        }

        .btn-outline-primary {
            color: var(--text-color);
            border-color: var(--border-color);
        }

        .btn-outline-primary:hover {
            background-color: #0d6efd;
            border-color: #0d6efd;
            color: white;
        }

        
    </style>
</head>
<body>
    <div class="container-fluid">
        
        <div class="row mt-3">
            <div class="col-12">
                <h1 class="text-center">üñ•Ô∏è System Metrics - Real-time Monitoring Dashboard</h1>
            </div>
        </div>

        
        <div class="row">
            <div class="col-12">
                <div class="control-panel">
                    <div class="row g-3">
                        
                        <div class="col-md-2">
                            <label class="form-label">Chart Type</label>
                            <select id="chartType" class="form-select">
                                <option value="line">Line</option>
                                <option value="bar">Bar</option>
                                <option value="scatter">Scatter</option>
                                <option value="pie">Pie</option>
                                <option value="doughnut">Doughnut</option>
                                <option value="radar">Radar</option>
                            </select>
                        </div>

                        
                        <div class="col-md-2">
                            <label class="form-label">X-Axis Field</label>
                            <select id="xField" class="form-select">
                            </select>
                        </div>

                        
                        <div class="col-md-3">
                            <label class="form-label">Y-Axis Fields</label>
                            <div id="yFields" class="field-selector">
                            </div>
                        </div>

                        
                        <div class="col-md-2">
                            <label class="form-label">Options</label>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="showTrendLine">
                                <label class="form-check-label" for="showTrendLine">Trend Line</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="showMovingAvg">
                                <label class="form-check-label" for="showMovingAvg">Moving Average</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="stackedMode">
                                <label class="form-check-label" for="stackedMode">Stacked</label>
                            </div>
                        </div>

                        
                        <div class="col-md-3">
                            <label class="form-label">Actions</label>
                            <div class="btn-group d-block" role="group">
                                <button type="button" class="btn btn-outline-primary btn-sm" onclick="updateChart()">
                                    <i class="bi bi-arrow-clockwise"></i> Update
                                </button>
                                <button type="button" class="btn btn-outline-primary btn-sm" onclick="resetZoom()">
                                    <i class="bi bi-zoom-out"></i> Reset Zoom
                                </button>
                                <button type="button" class="btn btn-outline-primary btn-sm" onclick="exportChart()">
                                    <i class="bi bi-download"></i> Export
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        
        <div class="row">
            <div class="col-12">
                <div class="chart-container">
                    <canvas id="mainChart"></canvas>
                </div>
            </div>
        </div>

        
        <div class="row">
            <div class="col-12">
                <div class="stats-panel">
                    <h5>Data Summary</h5>
                    <div id="dataSummary" class="row">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        
        let chartData = {"records":[{"active_connections":112,"cpu_usage":28.402388925728268,"disk_io":20.501843734608283,"load_average":1.4201194462864133,"memory_usage":58.83837288709361,"network_rx_mbps":129.70733986663518,"network_tx_mbps":131.74185784245395,"timestamp":"2025-10-07 06:57:46"},{"active_connections":134,"cpu_usage":44.771639475842065,"disk_io":65.72834589233511,"load_average":2.2385819737921033,"memory_usage":65.73347248945802,"network_rx_mbps":314.6537347797833,"network_tx_mbps":76.46910168338907,"timestamp":"2025-10-07 07:02:46"},{"active_connections":215,"cpu_usage":33.24505402256741,"disk_io":67.96466937418329,"load_average":1.6622527011283705,"memory_usage":74.78898398175419,"network_rx_mbps":198.75100175412734,"network_tx_mbps":200.35566863917012,"timestamp":"2025-10-07 07:07:46"},{"active_connections":206,"cpu_usage":40.63345974464516,"disk_io":86.27784112220493,"load_average":2.031672987232258,"memory_usage":70.25510002634329,"network_rx_mbps":589.6237571607642,"network_tx_mbps":186.90804665807286,"timestamp":"2025-10-07 07:12:46"},{"active_connections":463,"cpu_usage":40.626053987079715,"disk_io":81.77057554920809,"load_average":2.0313026993539856,"memory_usage":79.73723889729818,"network_rx_mbps":423.9891387908518,"network_tx_mbps":197.5008777155326,"timestamp":"2025-10-07 07:17:46"},{"active_connections":231,"cpu_usage":43.934167442236934,"disk_io":33.39913651740766,"load_average":2.1967083721118468,"memory_usage":73.00404108556252,"network_rx_mbps":204.75695272242865,"network_tx_mbps":207.6506543912394,"timestamp":"2025-10-07 07:22:46"},{"active_connections":124,"cpu_usage":48.07698586748144,"disk_io":72.60126863923574,"load_average":2.403849293374072,"memory_usage":73.53062857389985,"network_rx_mbps":272.43419727838267,"network_tx_mbps":92.3034589621714,"timestamp":"2025-10-07 07:27:46"},{"active_connections":229,"cpu_usage":59.053843189875465,"disk_io":80.1745208213184,"load_average":2.952692159493773,"memory_usage":65.50914352041903,"network_rx_mbps":577.6107430743616,"network_tx_mbps":109.23596009205002,"timestamp":"2025-10-07 07:32:46"},{"active_connections":370,"cpu_usage":85.09002791564271,"disk_io":28.100724916040598,"load_average":4.254501395782135,"memory_usage":78.34188722972064,"network_rx_mbps":399.9315791171194,"network_tx_mbps":72.77427129263488,"timestamp":"2025-10-07 07:37:46"},{"active_connections":100,"cpu_usage":36.844092739004694,"disk_io":57.41532434957208,"load_average":1.8422046369502347,"memory_usage":51.07404338469063,"network_rx_mbps":445.73609086968514,"network_tx_mbps":118.76220288188539,"timestamp":"2025-10-07 07:42:46"},{"active_connections":177,"cpu_usage":31.382127766481325,"disk_io":28.573866089967336,"load_average":1.5691063883240663,"memory_usage":53.75111710917724,"network_rx_mbps":187.46873805498723,"network_tx_mbps":248.13096995295928,"timestamp":"2025-10-07 07:47:46"},{"active_connections":233,"cpu_usage":26.102088825067455,"disk_io":24.12596157244691,"load_average":1.3051044412533728,"memory_usage":47.024986636016216,"network_rx_mbps":445.86839878860434,"network_tx_mbps":127.4999384593367,"timestamp":"2025-10-07 07:52:46"},{"active_connections":122,"cpu_usage":20.630546837027172,"disk_io":60.31390339142683,"load_average":1.0315273418513586,"memory_usage":45.258473993817006,"network_rx_mbps":183.39724572567994,"network_tx_mbps":141.96503861146257,"timestamp":"2025-10-07 07:57:46"},{"active_connections":237,"cpu_usage":26.885051972659717,"disk_io":36.44078422396071,"load_average":1.3442525986329859,"memory_usage":50.308562270148016,"network_rx_mbps":275.6523367085899,"network_tx_mbps":107.06619534589191,"timestamp":"2025-10-07 08:02:46"},{"active_connections":408,"cpu_usage":24.799356949950784,"disk_io":89.0711469070667,"load_average":1.2399678474975393,"memory_usage":49.664578852433316,"network_rx_mbps":293.6672094810815,"network_tx_mbps":191.84157922586854,"timestamp":"2025-10-07 08:07:46"},{"active_connections":493,"cpu_usage":43.775867845962594,"disk_io":57.44816917052087,"load_average":2.1887933922981295,"memory_usage":70.54448964961254,"network_rx_mbps":234.68359414945186,"network_tx_mbps":212.04994681202552,"timestamp":"2025-10-07 08:12:46"},{"active_connections":374,"cpu_usage":8.335104042290915,"disk_io":81.29059950041734,"load_average":0.41675520211454575,"memory_usage":60.1190966057284,"network_rx_mbps":216.78682575301713,"network_tx_mbps":216.14841626481507,"timestamp":"2025-10-07 08:17:46"},{"active_connections":485,"cpu_usage":3.3734335311692316,"disk_io":79.29800532660859,"load_average":0.16867167655846158,"memory_usage":67.02244215390061,"network_rx_mbps":425.71212801169474,"network_tx_mbps":156.70367310811642,"timestamp":"2025-10-07 08:22:46"},{"active_connections":263,"cpu_usage":5.668673956435093,"disk_io":96.54684763253266,"load_average":0.28343369782175465,"memory_usage":70.6801156694876,"network_rx_mbps":392.42015087576476,"network_tx_mbps":221.75663713681632,"timestamp":"2025-10-07 08:27:46"},{"active_connections":253,"cpu_usage":4.48582824530226,"disk_io":91.51407360638838,"load_average":0.224291412265113,"memory_usage":75.825522284154,"network_rx_mbps":245.29634007248973,"network_tx_mbps":66.37195717904319,"timestamp":"2025-10-07 08:32:46"},{"active_connections":252,"cpu_usage":17.483600429510066,"disk_io":61.828113271691294,"load_average":0.8741800214755033,"memory_usage":76.16839274025929,"network_rx_mbps":538.7814365320471,"network_tx_mbps":228.27637393409458,"timestamp":"2025-10-07 08:37:46"},{"active_connections":496,"cpu_usage":11.887194714601009,"disk_io":66.32671241724293,"load_average":0.5943597357300504,"memory_usage":70.8104462592216,"network_rx_mbps":358.3614137542582,"network_tx_mbps":172.6007077539498,"timestamp":"2025-10-07 08:42:46"},{"active_connections":245,"cpu_usage":26.057054206568978,"disk_io":45.63012974245489,"load_average":1.3028527103284488,"memory_usage":69.32496754336843,"network_rx_mbps":313.2028571126333,"network_tx_mbps":160.0400904735216,"timestamp":"2025-10-07 08:47:46"},{"active_connections":329,"cpu_usage":32.067584922352566,"disk_io":30.535724467597873,"load_average":1.6033792461176284,"memory_usage":65.86035310779482,"network_rx_mbps":185.52928436243567,"network_tx_mbps":186.34598776753157,"timestamp":"2025-10-07 08:52:46"}],"fields":["active_connections","cpu_usage","disk_io","load_average","memory_usage","network_rx_mbps","network_tx_mbps","timestamp"],"numericFields":["active_connections","cpu_usage","disk_io","load_average","memory_usage","network_rx_mbps","network_tx_mbps"],"dateFields":["timestamp"],"categories":{},"summary":{"recordCount":24,"fieldTypes":{"active_connections":"numeric","cpu_usage":"numeric","disk_io":"numeric","load_average":"numeric","memory_usage":"numeric","network_rx_mbps":"numeric","network_tx_mbps":"numeric","timestamp":"date"},"numericStats":{"active_connections":{"min":100,"max":496,"mean":272.9583333333333,"stdDev":123.4414433266055,"count":24},"cpu_usage":{"min":3.3734335311692316,"max":85.09002791564271,"mean":30.983801148145133,"stdDev":18.414390258263545,"count":24},"disk_io":{"min":20.501843734608283,"max":96.54684763253266,"mean":60.119928676518235,"stdDev":23.338085936603058,"count":24},"load_average":{"min":0.16867167655846158,"max":4.254501395782135,"mean":1.5491900574072561,"stdDev":0.9207195129131772,"count":24},"memory_usage":{"min":45.258473993817006,"max":79.73723889729818,"mean":65.1323523729733,"stdDev":10.336371061995553,"count":24},"network_rx_mbps":{"min":129.70733986663518,"max":589.6237571607642,"mean":327.2509372832031,"stdDev":129.00597629185717,"count":24},"network_tx_mbps":{"min":66.37195717904319,"max":248.13096995295928,"mean":159.604150507668,"stdDev":52.91589194654338,"count":24}}}};
        let chartConfig = {"title":"üñ•Ô∏è System Metrics - Real-time Monitoring Dashboard","width":1400,"height":700,"chartType":"line","timeFormat":"YYYY-MM-DD HH:mm:ss","xAxisType":"time","yAxisType":"linear","showLegend":true,"showTooltips":true,"enableZoom":true,"enablePan":true,"enableAnimations":true,"showDataLabels":false,"enableInteractive":true,"enableCalculations":true,"colorScheme":"vibrant","theme":"dark","exportFormats":["png","csv"],"customCSS":"","fields":{}};
        let mainChart = null;

        
        document.addEventListener('DOMContentLoaded', function() {
            initializeControls();
            createChart();
            updateDataSummary();
        });

        
        function initializeControls() {
            
            const xFieldSelect = document.getElementById('xField');
            const yFieldsDiv = document.getElementById('yFields');

            chartData.fields.forEach(field => {
                
                const option = document.createElement('option');
                option.value = field;
                option.textContent = field;
                xFieldSelect.appendChild(option);

                
                const checkDiv = document.createElement('div');
                checkDiv.className = 'form-check';
                checkDiv.innerHTML = `
                    <input class="form-check-input" type="checkbox" id="y_${field}" value="${field}">
                    <label class="form-check-label" for="y_${field}">${field}</label>
                `;
                yFieldsDiv.appendChild(checkDiv);
            });

            
            if (chartData.fields.length > 0) {
                xFieldSelect.value = chartData.fields[0];
            }

            
            chartData.numericFields.forEach(field => {
                const checkbox = document.getElementById(`y_${field}`);
                if (checkbox) {
                    checkbox.checked = true;
                }
            });

            
            document.getElementById('chartType').value = chartConfig.chartType;
        }

        
        function createChart() {
            const ctx = document.getElementById('mainChart').getContext('2d');

            if (mainChart) {
                mainChart.destroy();
            }

            const chartType = document.getElementById('chartType').value;
            const xField = document.getElementById('xField').value;
            const selectedYFields = getSelectedYFields();
            const showTrendLine = document.getElementById('showTrendLine').checked;
            const showMovingAvg = document.getElementById('showMovingAvg').checked;
            const stackedMode = document.getElementById('stackedMode').checked;

            
            const labels = chartData.records.map(record => record[xField]);
            const datasets = [];

            
            const colors = generateColors(selectedYFields.length);

            selectedYFields.forEach((field, index) => {
                const data = chartData.records.map(record => {
                    const value = record[field];
                    return typeof value === 'number' ? value : parseFloat(value) || 0;
                });

                datasets.push({
                    label: field,
                    data: data,
                    backgroundColor: colors[index] + '80', 
                    borderColor: colors[index],
                    borderWidth: 2,
                    fill: chartType === 'area',
                    tension: 0.4
                });

                
                if (showMovingAvg && data.length > 5) {
                    const movingAvgData = calculateMovingAverage(data, 5);
                    datasets.push({
                        label: `${field} (5-period MA)`,
                        data: movingAvgData,
                        backgroundColor: 'transparent',
                        borderColor: colors[index],
                        borderWidth: 1,
                        borderDash: [5, 5],
                        fill: false,
                        tension: 0.1,
                        pointRadius: 0
                    });
                }
            });

            
            const config = {
                type: chartType,
                data: {
                    labels: labels,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            type: chartData.dateFields.includes(xField) ? 'time' : 'category',
                            title: {
                                display: true,
                                text: xField
                            }
                        },
                        y: {
                            stacked: stackedMode,
                            title: {
                                display: true,
                                text: 'Values'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: chartConfig.showLegend
                        },
                        tooltip: {
                            enabled: chartConfig.showTooltips,
                            mode: 'index',
                            intersect: false
                        },
                        zoom: {
                            zoom: {
                                wheel: {
                                    enabled: chartConfig.enableZoom
                                },
                                pinch: {
                                    enabled: chartConfig.enableZoom
                                },
                                mode: 'x'
                            },
                            pan: {
                                enabled: chartConfig.enablePan,
                                mode: 'x'
                            }
                        }
                    },
                    animation: {
                        duration: chartConfig.enableAnimations ? 1000 : 0
                    }
                }
            };

            mainChart = new Chart(ctx, config);
        }

        
        function getSelectedYFields() {
            const checkboxes = document.querySelectorAll('#yFields input[type="checkbox"]:checked');
            return Array.from(checkboxes).map(cb => cb.value);
        }

        function generateColors(count) {
            const colors = [
                '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF',
                '#FF9F40', '#FF6384', '#C9CBCF', '#4BC0C0', '#36A2EB'
            ];

            const result = [];
            for (let i = 0; i < count; i++) {
                result.push(colors[i % colors.length]);
            }
            return result;
        }

        function calculateMovingAverage(data, period) {
            const result = [];
            for (let i = 0; i < data.length; i++) {
                if (i < period - 1) {
                    result.push(null);
                } else {
                    const sum = data.slice(i - period + 1, i + 1).reduce((a, b) => a + b, 0);
                    result.push(sum / period);
                }
            }
            return result;
        }

        function updateChart() {
            createChart();
        }

        function resetZoom() {
            if (mainChart) {
                mainChart.resetZoom();
            }
        }

        function exportChart() {
            if (mainChart) {
                const url = mainChart.toBase64Image();
                const link = document.createElement('a');
                link.download = 'chart.png';
                link.href = url;
                link.click();
            }
        }

        function updateDataSummary() {
            const summaryDiv = document.getElementById('dataSummary');
            let html = `
                <div class="col-md-3">
                    <strong>Records:</strong> ${chartData.summary.recordCount}
                </div>
                <div class="col-md-3">
                    <strong>Fields:</strong> ${chartData.fields.length}
                </div>
                <div class="col-md-3">
                    <strong>Numeric Fields:</strong> ${chartData.numericFields.length}
                </div>
                <div class="col-md-3">
                    <strong>Date Fields:</strong> ${chartData.dateFields.length}
                </div>
            `;

            
            for (const [field, stats] of Object.entries(chartData.summary.numericStats)) {
                html += `
                    <div class="col-md-12 mt-2">
                        <small><strong>${field}:</strong>
                        Min: ${stats.min.toFixed(2)},
                        Max: ${stats.max.toFixed(2)},
                        Mean: ${stats.mean.toFixed(2)},
                        StdDev: ${stats.stdDev.toFixed(2)}
                        </small>
                    </div>
                `;
            }

            summaryDiv.innerHTML = html;
        }
    </script>
</body>
</html>